<script>
    // Variables globales
    const API_BASE_URL = 'http://localhost:8080/api';
    let usuarioActual = null;
    let carritoPresencial = [];
    let categorias = [];

    // Inicializar dashboard
    document.addEventListener('DOMContentLoaded', function() {
      verificarAutenticacion();
      configurarEventos();
      cargarDashboard();
    });

    // Verificar si el usuario está autenticado
    function verificarAutenticacion() {
      const usuario = JSON.parse(localStorage.getItem('usuario') || '{}');
      
      if (!usuario.id || usuario.rol !== 'trabajador') {
        alert('Debes iniciar sesión como trabajador para acceder a esta página');
        window.location.href = 'login.html';
        return;
      }

      usuarioActual = usuario;
      actualizarInterfazUsuario();
    }

    // Actualizar interfaz para usuario logueado
    function actualizarInterfazUsuario() {
      if (usuarioActual) {
        // Actualizar header
        document.getElementById('user-actions').innerHTML = `
          <a href="dashboard-trabajador.html">Panel (${usuarioActual.nombre})</a>
          <a href="productos.html">Catálogo</a>
          <a href="#" onclick="cerrarSesion()">Cerrar Sesión</a>
        `;

        // Actualizar mensaje de bienvenida
        document.getElementById('welcome-message').textContent = 
          `Bienvenido, ${usuarioActual.nombre}`;
        document.getElementById('user-info').textContent = 
          `Trabajador TechSolvers - Panel de Gestión`;
      }
    }

    // Configurar eventos
    function configurarEventos() {
      // Navegación del sidebar
      document.querySelectorAll('.menu-link').forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const section = this.dataset.section;
          if (section) {
            cambiarSeccion(section);
          }
        });
      });

      // Formularios
      document.getElementById('form-producto').addEventListener('submit', guardarProducto);
      document.getElementById('form-categoria').addEventListener('submit', guardarCategoria);
      document.getElementById('form-servicio').addEventListener('submit', guardarServicio);

      // Búsqueda
      document.getElementById('search').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          const query = this.value.trim();
          if (query) {
            window.location.href = `productos.html?buscar=${encodeURIComponent(query)}`;
          }
        }
      });
    }

    // Cambiar sección activa
    function cambiarSeccion(seccionId) {
      // Actualizar navegación
      document.querySelectorAll('.menu-link').forEach(link => {
        link.classList.remove('active');
      });
      document.querySelector(`[data-section="${seccionId}"]`).classList.add('active');

      // Mostrar sección
      document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active');
      });
      document.getElementById(`section-${seccionId}`).classList.add('active');

      // Cargar datos específicos de la sección
      switch(seccionId) {
        case 'resumen':
          cargarResumen();
          break;
        case 'productos':
          cargarProductos();
          break;
        case 'categorias':
          cargarCategorias();
          break;
        case 'ordenes':
          cargarOrdenes();
          break;
        case 'presencial':
          // La sección presencial no necesita carga inicial
          break;
        case 'servicios':
          cargarServicios();
          break;
        case 'reportes':
          cargarReportes();
          break;
      }
    }

    // Cargar dashboard inicial
    async function cargarDashboard() {
      await cargarCategorias(); // Cargar categorías globales
      await cargarResumen();
    }

    // Cargar resumen del trabajador
    async function cargarResumen() {
      try {
        // Cargar estadísticas generales
        const [productosRes, ordenesRes, categoriasRes] = await Promise.all([
          fetch(`${API_BASE_URL}/productos`),
          fetch(`${API_BASE_URL}/ordenes`),
          fetch(`${API_BASE_URL}/categorias`)
        ]);

        if (productosRes.ok) {
          const productos = await productosRes.json();
          document.getElementById('total-productos').textContent = productos.length;
        }

        if (ordenesRes.ok) {
          const ordenes = await ordenesRes.json();
          const pendientes = ordenes.filter(o => o.estado === 'pendiente' || o.estado === 'en_proceso').length;
          const hoy = new Date().toDateString();
          const ordenesHoy = ordenes.filter(o => new Date(o.fechaCreacion).toDateString() === hoy).length;
          
          document.getElementById('ordenes-pendientes').textContent = pendientes;
          document.getElementById('ordenes-hoy').textContent = ordenesHoy;
        }

        if (categoriasRes.ok) {
          const categoriasData = await categoriasRes.json();
          document.getElementById('total-categorias').textContent = categoriasData.length;
        }

        // Cargar órdenes recientes
        await cargarOrdenesRecientes();

      } catch (error) {
        console.error('Error al cargar resumen:', error);
      }
    }

    // Cargar órdenes recientes
    async function cargarOrdenesRecientes() {
      try {
        const response = await fetch(`${API_BASE_URL}/ordenes/pendientes`);
        
        if (!response.ok) {
          throw new Error('Error al cargar órdenes');
        }

        const ordenes = await response.json();
        const tbody = document.getElementById('ordenes-recientes');
        
        if (ordenes.length === 0) {
          tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #666;">No hay órdenes pendientes</td></tr>';
          return;
        }

        tbody.innerHTML = ordenes.slice(0, 5).map(orden => `
          <tr>
            <td>#${orden.numeroOrden}</td>
            <td>${orden.datosCliente?.nombre || 'Cliente'}</td>
            <td>${new Date(orden.fechaCreacion).toLocaleDateString()}</td>
            <td>S/ ${orden.total.toFixed(2)}</td>
            <td><span class="order-status ${orden.estado}">${formatearEstado(orden.estado)}</span></td>
            <td>
              <button class="btn btn-info" onclick="cambiarEstadoOrden(${orden.id}, 'en_proceso')" style="padding: 6px 12px; font-size: 12px;">
                Procesar
              </button>
            </td>
          </tr>
        `).join('');

      } catch (error) {
        console.error('Error:', error);
        document.getElementById('ordenes-recientes').innerHTML = 
          '<tr><td colspan="6" style="text-align: center; color: #dc3545;">Error al cargar órdenes</td></tr>';
      }
    }

    // Cargar productos
    async function cargarProductos() {
      try {
        const response = await fetch(`${API_BASE_URL}/productos`);
        
        if (!response.ok) {
          throw new Error('Error al cargar productos');
        }

        const productos = await response.json();
        const tbody = document.getElementById('tabla-productos');
        
        if (productos.length === 0) {
          tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #666;">No hay productos registrados</td></tr>';
          return;
        }

        tbody.innerHTML = productos.map(producto => `
          <tr>
            <td>${producto.id}</td>
            <td>${producto.nombre}</td>
            <td>${producto.categoria?.titulo || 'Sin categoría'}</td>
            <td>S/ ${producto.precio.toFixed(2)}</td>
            <td>${producto.stock}</td>
            <td>
              <span style="color: ${producto.stock > 0 ? '#28a745' : '#dc3545'};">
                ${producto.stock > 0 ? 'Disponible' : 'Agotado'}
              </span>
            </td>
            <td>
              <button class="btn btn-warning" onclick="editarProducto(${producto.id})" style="padding: 6px 12px; font-size: 12px;">
                Editar
              </button>
              <button class="btn btn-danger" onclick="eliminarProducto(${producto.id})" style="padding: 6px 12px; font-size: 12px; margin-left: 5px;">
                Eliminar
              </button>
            </td>
          </tr>
        `).join('');

      } catch (error) {
        console.error('Error:', error);
        document.getElementById('tabla-productos').innerHTML = 
          '<tr><td colspan="7" style="text-align: center; color: #dc3545;">Error al cargar productos</td></tr>';
      }
    }

    // Cargar categorías
    async function cargarCategorias() {
      try {
        const response = await fetch(`${API_BASE_URL}/categorias`);
        
        if (!response.ok) {
          throw new Error('Error al cargar categorías');
        }

        categorias = await response.json();
        
        // Actualizar select del modal producto
        const select = document.getElementById('producto-categoria');
        select.innerHTML = '<option value="">Seleccionar categoría</option>';
        categorias.forEach(categoria => {
          select.innerHTML += `<option value="${categoria.id}">${categoria.titulo}</option>`;
        });

        // Actualizar tabla de categorías si estamos en esa sección
        const tbody = document.getElementById('tabla-categorias');
        if (tbody) {
          if (categorias.length === 0) {
            tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #666;">No hay categorías registradas</td></tr>';
            return;
          }

          tbody.innerHTML = categorias.map(categoria => `
            <tr>
              <td>${categoria.id}</td>
              <td>${categoria.titulo}</td>
              <td>${categoria.descripcion || '-'}</td>
              <td>${categoria.totalProductos || 0}</td>
              <td>
                <span style="color: ${categoria.activo ? '#28a745' : '#dc3545'};">
                  ${categoria.activo ? 'Activa' : 'Inactiva'}
                </span>
              </td>
              <td>
                <button class="btn btn-warning" onclick="editarCategoria(${categoria.id})" style="padding: 6px 12px; font-size: 12px;">
                  Editar
                </button>
                <button class="btn btn-danger" onclick="eliminarCategoria(${categoria.id})" style="padding: 6px 12px; font-size: 12px; margin-left: 5px;">
                  Eliminar
                </button>
              </td>
            </tr>
          `).join('');
        }

      } catch (error) {
        console.error('Error:', error);
        if (document.getElementById('tabla-categorias')) {
          document.getElementById('tabla-categorias').innerHTML = 
            '<tr><td colspan="6" style="text-align: center; color: #dc3545;">Error al cargar categorías</td></tr>';
        }
      }
    }

    // Cargar órdenes
    async function cargarOrdenes() {
      try {
        const response = await fetch(`${API_BASE_URL}/ordenes`);
        
        if (!response.ok) {
          throw new Error('Error al cargar órdenes');
        }

        const ordenes = await response.json();
        const tbody = document.getElementById('tabla-ordenes');
        
        if (ordenes.length === 0) {
          tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #666;">No hay órdenes registradas</td></tr>';
          return;
        }

        tbody.innerHTML = ordenes.map(orden => `
          <tr>
            <td>#${orden.numeroOrden}</td>
            <td>${orden.datosCliente?.nombre || 'Cliente'}</td>
            <td>${new Date(orden.fechaCreacion).toLocaleDateString()}</td>
            <td>${orden.items ? orden.items.length : 0}</td>
            <td>S/ ${orden.total.toFixed(2)}</td>
            <td><span class="order-status ${orden.estado}">${formatearEstado(orden.estado)}</span></td>
            <td>
              ${orden.estado === 'pendiente' ? `
                <button class="btn btn-info" onclick="cambiarEstadoOrden(${orden.id}, 'en_proceso')" style="padding: 6px 12px; font-size: 12px;">
                  Procesar
                </button>
              ` : ''}
              ${orden.estado === 'en_proceso' ? `
                <button class="btn btn-primary" onclick="cambiarEstadoOrden(${orden.id}, 'entregado')" style="padding: 6px 12px; font-size: 12px;">
                  Entregar
                </button>
              ` : ''}
              <button class="btn btn-warning" onclick="verDetalleOrden(${orden.id})" style="padding: 6px 12px; font-size: 12px; margin-left: 5px;">
                Ver
              </button>
            </td>
          </tr>
        `).join('');

      } catch (error) {
        console.error('Error:', error);
        document.getElementById('tabla-ordenes').innerHTML = 
          '<tr><td colspan="7" style="text-align: center; color: #dc3545;">Error al cargar órdenes</td></tr>';
      }
    }

    // Cargar servicios
    async function cargarServicios() {
      try {
        const response = await fetch(`${API_BASE_URL}/servicios`);
        
        if (!response.ok) {
          throw new Error('Error al cargar servicios');
        }

        const servicios = await response.json();
        const tbody = document.getElementById('tabla-servicios');
        
        if (servicios.length === 0) {
          tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #666;">No hay servicios registrados</td></tr>';
          return;
        }

        tbody.innerHTML = servicios.map(servicio => `
          <tr>
            <td>${servicio.id}</td>
            <td>${servicio.titulo}</td>
            <td>${servicio.tipoServicio}</td>
            <td>S/ ${servicio.precio ? servicio.precio.toFixed(2) : 'Consultar'}</td>
            <td>
              <span style="color: ${servicio.mostrarEnInicio ? '#28a745' : '#dc3545'};">
                ${servicio.mostrarEnInicio ? 'Sí' : 'No'}
              </span>
            </td>
            <td>
              <button class="btn btn-warning" onclick="editarServicio(${servicio.id})" style="padding: 6px 12px; font-size: 12px;">
                Editar
              </button>
              <button class="btn btn-danger" onclick="eliminarServicio(${servicio.id})" style="padding: 6px 12px; font-size: 12px; margin-left: 5px;">
                Eliminar
              </button>
            </td>
          </tr>
        `).join('');

      } catch (error) {
        console.error('Error:', error);
        document.getElementById('tabla-servicios').innerHTML = 
          '<tr><td colspan="6" style="text-align: center; color: #dc3545;">Error al cargar servicios</td></tr>';
      }
    }

    // Cargar reportes
    async function cargarReportes() {
      try {
        // Cargar estadísticas específicas del trabajador
        // Aquí podrías implementar endpoints específicos para reportes del trabajador
        
        // Por ahora, simulamos algunos datos
        document.getElementById('productos-creados').textContent = '12';
        document.getElementById('ventas-atendidas').textContent = '8';
        document.getElementById('categorias-creadas').textContent = '3';
        document.getElementById('servicios-gestionados').textContent = '5';

        // Actividad reciente simulada
        const tbody = document.getElementById('tabla-actividad');
        tbody.innerHTML = `
          <tr>
            <td>${new Date().toLocaleDateString()}</td>
            <td>Producto creado</td>
            <td>Laptop Dell Inspiron 15</td>
            <td><span class="order-status entregado">Completado</span></td>
          </tr>
          <tr>
            <td>${new Date(Date.now() - 86400000).toLocaleDateString()}</td>
            <td>Venta procesada</td>
            <td>Orden #ORD-001234</td>
            <td><span class="order-status entregado">Completado</span></td>
          </tr>
          <tr>
            <td>${new Date(Date.now() - 172800000).toLocaleDateString()}</td>
            <td>Categoría creada</td>
            <td>Accesorios Gaming</td>
            <td><span class="order-status entregado">Completado</span></td>
          </tr>
        `;

      } catch (error) {
        console.error('Error:', error);
        document.getElementById('tabla-actividad').innerHTML = 
          '<tr><td colspan="4" style="text-align: center; color: #dc3545;">Error al cargar reportes</td></tr>';
      }
    }

    // FUNCIONES DE MODALES

    // Mostrar modal producto
    function mostrarModalProducto(productoId = null) {
      document.getElementById('modal-producto-titulo').textContent = productoId ? 'Editar Producto' : 'Agregar Producto';
      document.getElementById('form-producto').reset();
      document.getElementById('producto-id').value = productoId || '';
      
      if (productoId) {
        cargarDatosProducto(productoId);
      }
      
      document.getElementById('modal-producto').style.display = 'flex';
    }

    // Mostrar modal categoría
    function mostrarModalCategoria(categoriaId = null) {
      document.getElementById('modal-categoria-titulo').textContent = categoriaId ? 'Editar Categoría' : 'Agregar Categoría';
      document.getElementById('form-categoria').reset();
      document.getElementById('categoria-id').value = categoriaId || '';
      
      if (categoriaId) {
        cargarDatosCategoria(categoriaId);
      }
      
      document.getElementById('modal-categoria').style.display = 'flex';
    }

    // Mostrar modal servicio
    function mostrarModalServicio(servicioId = null) {
      document.getElementById('modal-servicio-titulo').textContent = servicioId ? 'Editar Servicio' : 'Agregar Servicio';
      document.getElementById('form-servicio').reset();
      document.getElementById('servicio-id').value = servicioId || '';
      
      if (servicioId) {
        cargarDatosServicio(servicioId);
      }
      
      document.getElementById('modal-servicio').style.display = 'flex';
    }

    // Cerrar modal
    function cerrarModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
    }

    // FUNCIONES CRUD PRODUCTOS

    // Guardar producto
    async function guardarProducto(e) {
      e.preventDefault();
      
      try {
        const formData = new FormData(e.target);
        const datos = Object.fromEntries(formData);
        const productoId = document.getElementById('producto-id').value;
        
        const url = productoId ? 
          `${API_BASE_URL}/productos/${productoId}` : 
          `${API_BASE_URL}/productos`;
        
        const method = productoId ? 'PUT' : 'POST';
        
        const response = await fetch(url, {
          method: method,
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            ...datos,
            precio: parseFloat(datos.precio),
            stock: parseInt(datos.stock),
            categoriaId: parseInt(datos.categoriaId),
            creadoPor: usuarioActual.id
          })
        });

        if (response.ok) {
          mostrarMensajeModal('mensaje-modal-producto', 
            `Producto ${productoId ? 'actualizado' : 'creado'} exitosamente`, 'exito');
          
          setTimeout(() => {
            cerrarModal('modal-producto');
            cargarProductos();
            cargarResumen();
          }, 1500);
        } else {
          const error = await response.json();
          mostrarMensajeModal('mensaje-modal-producto', 
            error.message || 'Error al guardar producto', 'error');
        }

      } catch (error) {
        console.error('Error:', error);
        mostrarMensajeModal('mensaje-modal-producto', 
          'Error de conexión al guardar producto', 'error');
      }
    }

    // Editar producto
    function editarProducto(productoId) {
      mostrarModalProducto(productoId);
    }

    // Cargar datos del producto para edición
    async function cargarDatosProducto(productoId) {
      try {
        const response = await fetch(`${API_BASE_URL}/productos/${productoId}`);
        
        if (response.ok) {
          const producto = await response.json();
          
          document.getElementById('producto-nombre').value = producto.nombre || '';
          document.getElementById('producto-marca').value = producto.marca || '';
          document.getElementById('producto-modelo').value = producto.modelo || '';
          document.getElementById('producto-categoria').value = producto.categoria?.id || '';
          document.getElementById('producto-precio').value = producto.precio || '';
          document.getElementById('producto-stock').value = producto.stock || '';
          document.getElementById('producto-descripcion').value = producto.descripcion || '';
          document.getElementById('producto-imagen').value = producto.imagenUrl || '';
        }
      } catch (error) {
        console.error('Error al cargar producto:', error);
      }
    }

    // Eliminar producto
    async function eliminarProducto(productoId) {
      if (!confirm('¿Estás seguro de que quieres eliminar este producto?')) {
        return;
      }

      try {
        const response = await fetch(`${API_BASE_URL}/productos/${productoId}`, {
          method: 'DELETE'
        });

        if (response.ok) {
          mostrarMensaje('mensaje-productos', 'Producto eliminado exitosamente', 'exito');
          cargarProductos();
          cargarResumen();
        } else {
          const error = await response.json();
          mostrarMensaje('mensaje-productos', error.message || 'Error al eliminar producto', 'error');
        }

      } catch (error) {
        console.error('Error:', error);
        mostrarMensaje('mensaje-productos', 'Error de conexión al eliminar producto', 'error');
      }
    }

    // FUNCIONES CRUD CATEGORÍAS

    // Guardar categoría
    async function guardarCategoria(e) {
      e.preventDefault();
      
      try {
        const formData = new FormData(e.target);
        const datos = Object.fromEntries(formData);
        const categoriaId = document.getElementById('categoria-id').value;
        
        const url = categoriaId ? 
          `${API_BASE_URL}/categorias/${categoriaId}` : 
          `${API_BASE_URL}/categorias`;
        
        const method = categoriaId ? 'PUT' : 'POST';
        
        const response = await fetch(url, {
          method: method,
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            ...datos,
            creadoPor: usuarioActual.id,
            activo: true
          })
        });

        if (response.ok) {
          mostrarMensajeModal('mensaje-modal-categoria', 
            `Categoría ${categoriaId ? 'actualizada' : 'creada'} exitosamente`, 'exito');
          
          setTimeout(() => {
            cerrarModal('modal-categoria');
            cargarCategorias();
            cargarResumen();
          }, 1500);
        } else {
          const error = await response.json();
          mostrarMensajeModal('mensaje-modal-categoria', 
            error.message || 'Error al guardar categoría', 'error');
        }

      } catch (error) {
        console.error('Error:', error);
        mostrarMensajeModal('mensaje-modal-categoria', 
          'Error de conexión al guardar categoría', 'error');
      }
    }

    // Editar categoría
    function editarCategoria(categoriaId) {
      mostrarModalCategoria(categoriaId);
    }

    // Cargar datos de la categoría para edición
    async function cargarDatosCategoria(categoriaId) {
      try {
        const categoria = categorias.find(c => c.id == categoriaId);
        if (categoria) {
          document.getElementById('categoria-titulo').value = categoria.titulo || '';
          document.getElementById('categoria-descripcion').value = categoria.descripcion || '';
          document.getElementById('categoria-imagen').value = categoria.imagenUrl || '';
        }
      } catch (error) {
        console.error('Error al cargar categoría:', error);
      }
    }

    // Eliminar categoría
    async function eliminarCategoria(categoriaId) {
      if (!confirm('¿Estás seguro de que quieres eliminar esta categoría?')) {
        return;
      }

      try {
        const response = await fetch(`${API_BASE_URL}/categorias/${categoriaId}`, {
          method: 'DELETE'
        });

        if (response.ok) {
          mostrarMensaje('mensaje-categorias', 'Categoría eliminada exitosamente', 'exito');
          cargarCategorias();
          cargarResumen();
        } else {
          const error = await response.json();
          mostrarMensaje('mensaje-categorias', error.message || 'Error al eliminar categoría', 'error');
        }

      } catch (error) {
        console.error('Error:', error);
        mostrarMensaje('mensaje-categorias', 'Error de conexión al eliminar categoría', 'error');
      }
    }

    // FUNCIONES CRUD SERVICIOS

    // Guardar servicio
    async function guardarServicio(e) {
      e.preventDefault();
      
      try {
        const formData = new FormData(e.target);
        const datos = Object.fromEntries(formData);
        const servicioId = document.getElementById('servicio-id').value;
        
        const url = servicioId ? 
          `${API_BASE_URL}/servicios/${servicioId}` : 
          `${API_BASE_URL}/servicios`;
        
        const method = servicioId ? 'PUT' : 'POST';
        
        const response = await fetch(url, {
          method: method,
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            ...datos,
            precio: datos.precio ? parseFloat(datos.precio) : null,
            mostrarEnInicio: datos.mostrarEnInicio === 'true',
            creadoPor: usuarioActual.id
          })
        });

        if (response.ok) {
          mostrarMensajeModal('mensaje-modal-servicio', 
            `Servicio ${servicioId ? 'actualizado' : 'creado'} exitosamente`, 'exito');
          
          setTimeout(() => {
            cerrarModal('modal-servicio');
            cargarServicios();
            cargarResumen();
          }, 1500);
        } else {
          const error = await response.json();
          mostrarMensajeModal('mensaje-modal-servicio', 
            error.message || 'Error al guardar servicio', 'error');
        }

      } catch (error) {
        console.error('Error:', error);
        mostrarMensajeModal('mensaje-modal-servicio', 
          'Error de conexión al guardar servicio', 'error');
      }
    }

    // Editar servicio
    function editarServicio(servicioId) {
      mostrarModalServicio(servicioId);
    }

    // Cargar datos del servicio para edición
    async function cargarDatosServicio(servicioId) {
      try {
        const response = await fetch(`${API_BASE_URL}/servicios/${servicioId}`);
        
        if (response.ok) {
          const servicio = await response.json();
          
          document.getElementById('servicio-titulo').value = servicio.titulo || '';
          document.getElementById('servicio-tipo').value = servicio.tipoServicio || '';
          document.getElementById('servicio-precio').value = servicio.precio || '';
          document.getElementById('servicio-visible').value = servicio.mostrarEnInicio.toString();
          document.getElementById('servicio-descripcion').value = servicio.descripcion || '';
        }
      } catch (error) {
        console.error('Error al cargar servicio:', error);
      }
    }

    // Eliminar servicio
    async function eliminarServicio(servicioId) {
      if (!confirm('¿Estás seguro de que quieres eliminar este servicio?')) {
        return;
      }

        const response = await fetch(`${API_BASE_URL}/servicios/${servicioId}`, {
          method: 'DELETE'
        });

        if (response.ok) {
          mostrarMensaje('mensaje-servicios', 'Servicio eliminado exitosamente', 'exito');
          cargarServicios();
          cargarResumen();
        } else {
          const error = await response.json();
          mostrarMensaje('mensaje-servicios', error.message || 'Error al eliminar servicio', 'error');
        }

      } catch (error) {
        console.error('Error:', error);
        mostrarMensaje('mensaje-servicios', 'Error de conexión al eliminar servicio', 'error');
      }
    }

    // FUNCIONES DE ATENCIÓN PRESENCIAL

    // Buscar productos para atención presencial
    async function buscarProductos() {
      const query = document.getElementById('buscar-producto').value.trim();
      
      if (!query) {
        mostrarMensaje('mensaje-presencial', 'Ingresa un término de búsqueda', 'info');
        return;
      }

      try {
        const response = await fetch(`${API_BASE_URL}/productos/buscar?q=${encodeURIComponent(query)}`);
        
        if (!response.ok) {
          throw new Error('Error al buscar productos');
        }

        const productos = await response.json();
        const resultadosDiv = document.getElementById('resultados-productos');
        
        if (productos.length === 0) {
          resultadosDiv.innerHTML = '<p style="text-align: center; color: #666;">No se encontraron productos</p>';
          return;
        }

        resultadosDiv.innerHTML = `
          <div style="background: white; border: 1px solid #ddd; border-radius: 8px; padding: 15px;">
            <h5 style="margin-bottom: 15px;">Resultados de búsqueda:</h5>
            ${productos.slice(0, 5).map(producto => `
              <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #eee;">
                <div>
                  <strong>${producto.nombre}</strong><br>
                  <small>Precio: S/ ${producto.precio.toFixed(2)} | Stock: ${producto.stock}</small>
                </div>
                <button class="btn btn-primary" onclick="agregarAlCarritoPresencial(${producto.id}, '${producto.nombre}', ${producto.precio})" 
                        ${producto.stock <= 0 ? 'disabled' : ''} style="padding: 8px 15px; font-size: 12px;">
                  ${producto.stock > 0 ? 'Agregar' : 'Sin Stock'}
                </button>
              </div>
            `).join('')}
          </div>
        `;

      } catch (error) {
        console.error('Error:', error);
        mostrarMensaje('mensaje-presencial', 'Error al buscar productos', 'error');
      }
    }

    // Buscar productos al presionar Enter
    function buscarProductoEnter(event) {
      if (event.key === 'Enter') {
        buscarProductos();
      }
    }

    // Agregar producto al carrito presencial
    function agregarAlCarritoPresencial(productoId, nombre, precio) {
      const itemExistente = carritoPresencial.find(item => item.id === productoId);
      
      if (itemExistente) {
        itemExistente.cantidad++;
      } else {
        carritoPresencial.push({
          id: productoId,
          nombre: nombre,
          precio: precio,
          cantidad: 1
        });
      }
      
      actualizarCarritoPresencial();
    }

    // Actualizar carrito presencial
    function actualizarCarritoPresencial() {
      const carritoDiv = document.getElementById('carrito-items');
      const totalSpan = document.getElementById('total-carrito');
      const btnProcesar = document.getElementById('btn-procesar-venta');
      
      if (carritoPresencial.length === 0) {
        carritoDiv.innerHTML = '<p style="text-align: center; color: #666;">No hay productos en el carrito</p>';
        totalSpan.textContent = '0.00';
        btnProcesar.disabled = true;
        return;
      }

      carritoDiv.innerHTML = carritoPresencial.map(item => `
        <div class="carrito-item">
          <div>
            <strong>${item.nombre}</strong><br>
            <small>S/ ${item.precio.toFixed(2)} x ${item.cantidad}</small>
          </div>
          <div>
            <button onclick="cambiarCantidadPresencial(${item.id}, -1)" style="margin-right: 10px;">-</button>
            <span>${item.cantidad}</span>
            <button onclick="cambiarCantidadPresencial(${item.id}, 1)" style="margin-left: 10px;">+</button>
            <button onclick="eliminarItemPresencial(${item.id})" style="margin-left: 10px; background: #dc3545; color: white; border: none; padding: 4px 8px; border-radius: 4px;">×</button>
          </div>
        </div>
      `).join('');

      const total = carritoPresencial.reduce((sum, item) => sum + (item.precio * item.cantidad), 0);
      totalSpan.textContent = total.toFixed(2);
      btnProcesar.disabled = false;
    }

    // Cambiar cantidad en carrito presencial
    function cambiarCantidadPresencial(productoId, cambio) {
      const item = carritoPresencial.find(item => item.id === productoId);
      if (item) {
        item.cantidad += cambio;
        if (item.cantidad <= 0) {
          eliminarItemPresencial(productoId);
        } else {
          actualizarCarritoPresencial();
        }
      }
    }

    // Eliminar item del carrito presencial
    function eliminarItemPresencial(productoId) {
      carritoPresencial = carritoPresencial.filter(item => item.id !== productoId);
      actualizarCarritoPresencial();
    }

    // Limpiar carrito presencial
    function limpiarCarritoPresencial() {
      if (confirm('¿Estás seguro de que quieres limpiar el carrito?')) {
        carritoPresencial = [];
        actualizarCarritoPresencial();
        document.getElementById('resultados-productos').innerHTML = '';
        document.getElementById('buscar-producto').value = '';
      }
    }

    // Procesar venta presencial
    async function procesarVentaPresencial() {
      const nombre = document.getElementById('cliente-nombre').value.trim();
      const email = document.getElementById('cliente-email').value.trim();
      const telefono = document.getElementById('cliente-telefono').value.trim();
      const dni = document.getElementById('cliente-dni').value.trim();

      if (!nombre || !telefono || !dni) {
        mostrarMensaje('mensaje-presencial', 'Por favor completa los datos del cliente', 'error');
        return;
      }

      if (carritoPresencial.length === 0) {
        mostrarMensaje('mensaje-presencial', 'Agrega productos al carrito', 'error');
        return;
      }

      try {
        // Crear carrito presencial
        const carritoData = {
          trabajadorId: usuarioActual.id,
          tipoAtencion: 'presencial',
          datosCliente: {
            nombre: nombre,
            email: email,
            telefono: telefono,
            dni: dni
          }
        };

        const carritoResponse = await fetch(`${API_BASE_URL}/carritos/presencial`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(carritoData)
        });

        if (!carritoResponse.ok) {
          throw new Error('Error al crear carrito presencial');
        }

        const carrito = await carritoResponse.json();

        // Agregar productos al carrito
        for (const item of carritoPresencial) {
          await fetch(`${API_BASE_URL}/carritos/agregar`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              carritoId: carrito.id,
              productoId: item.id,
              cantidad: item.cantidad
            })
          });
        }

        // Crear orden
        const ordenResponse = await fetch(`${API_BASE_URL}/ordenes/crear`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            carritoId: carrito.id,
            metodoPago: 'efectivo'
          })
        });

        if (ordenResponse.ok) {
          const orden = await ordenResponse.json();
          mostrarMensaje('mensaje-presencial', 
            `¡Venta procesada exitosamente! Número de orden: #${orden.numeroOrden}`, 'exito');
          
          // Limpiar formulario
          limpiarVentaPresencial();
          cargarResumen();
        } else {
          throw new Error('Error al crear la orden');
        }

      } catch (error) {
        console.error('Error:', error);
        mostrarMensaje('mensaje-presencial', 'Error al procesar la venta', 'error');
      }
    }

    // Limpiar venta presencial
    function limpiarVentaPresencial() {
      document.getElementById('cliente-nombre').value = '';
      document.getElementById('cliente-email').value = '';
      document.getElementById('cliente-telefono').value = '';
      document.getElementById('cliente-dni').value = '';
      carritoPresencial = [];
      actualizarCarritoPresencial();
      document.getElementById('resultados-productos').innerHTML = '';
      document.getElementById('buscar-producto').value = '';
    }

    // FUNCIONES DE ÓRDENES

    // Cambiar estado de orden
    async function cambiarEstadoOrden(ordenId, nuevoEstado) {
      try {
        const response = await fetch(`${API_BASE_URL}/ordenes/${ordenId}/estado`, {
          method: 'PUT',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ estado: nuevoEstado })
        });

        if (response.ok) {
          mostrarMensaje('mensaje-ordenes', 'Estado de orden actualizado exitosamente', 'exito');
          cargarOrdenes();
          cargarOrdenesRecientes();
        } else {
          const error = await response.json();
          alert(error.message || 'Error al actualizar estado');
        }

      } catch (error) {
        console.error('Error:', error);
        alert('Error de conexión al actualizar estado');
      }
    }

    // Ver detalle de orden
    function verDetalleOrden(ordenId) {
      alert(`Ver detalle de la orden ${ordenId}\n\nEsta funcionalidad se puede expandir con un modal detallado.`);
    }

    // FUNCIONES AUXILIARES

    // Formatear estado de orden
    function formatearEstado(estado) {
      const estados = {
        'pendiente': 'Pendiente',
        'en_proceso': 'En Proceso',
        'entregado': 'Entregado',
        'cancelado': 'Cancelado'
      };
      return estados[estado] || estado;
    }

    // Mostrar mensajes
    function mostrarMensaje(elementId, texto, tipo) {
      const elemento = document.getElementById(elementId);
      elemento.innerHTML = `<div class="mensaje ${tipo}">${texto}</div>`;
      
      // Scroll hacia el mensaje
      elemento.scrollIntoView({ behavior: 'smooth', block: 'center' });
      
      // Limpiar mensaje después de 5 segundos
      setTimeout(() => {
        elemento.innerHTML = '';
      }, 5000);
    }

    // Mostrar mensajes en modales
    function mostrarMensajeModal(elementId, texto, tipo) {
      const elemento = document.getElementById(elementId);
      elemento.innerHTML = `<div class="mensaje ${tipo}">${texto}</div>`;
    }

    // Cerrar sesión
    function cerrarSesion() {
      if (confirm('¿Estás seguro de que quieres cerrar sesión?')) {
        localStorage.removeItem('usuario');
        alert('Sesión cerrada exitosamente');
        window.location.href = 'index.html';
      }
    }

    // Cerrar modales al hacer click fuera
    document.addEventListener('click', function(e) {
      if (e.target.classList.contains('modal-overlay')) {
        e.target.style.display = 'none';
      }
    });
  </script>
          <!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panel Trabajador - TechSolvers</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400&display=swap" rel="stylesheet">
  <style>
    /* ========================================
       ESTILOS GLOBALES Y RESET
    ======================================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f6f6f6;
      color: #333;
    }

    /* Clase para ocultar visualmente el label pero mantenerlo accesible */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* ========================================
       ESTILOS DEL HEADER
       (NO MODIFICAR - USADO EN TODAS LAS PÁGINAS)
    ======================================== */
    
    /* HEADER SUPERIOR - Logo, Búsqueda, Login/Perfil/Carrito */
    .header-superior {
      background-color: #f6f6f6;
      color: #333;
      padding: 15px 30px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: bold;
      display: flex;
      align-items: center;
      color: #333;
      flex: 1;
    }

    .logo img {
      width: 50px;
      height: 50px;
      border-radius: 8px;
    }

    /* BARRA DE BÚSQUEDA */
    .search-container {
      flex: 1;
      max-width: 600px;
      position: relative;
      display: flex;
      justify-content: center;
    }

    .search-box {
      width: 100%;
      padding: 12px 15px 12px 45px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-size: 16px;
      background-color: white;
      color: #333;
      outline: none;
      transition: all 0.3s ease;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .search-box:focus {
      border-color: #1C61E7;
      box-shadow: 0 0 0 3px rgba(28, 97, 231, 0.2);
      transform: translateY(-1px);
    }

    .search-box::placeholder {
      color: #999;
    }

    .search-icon {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 18px;
      color: #666;
    }

    /* LOGIN, PERFIL Y CARRITO */
    .user-actions {
      display: flex;
      gap: 25px;
      align-items: center;
      flex: 1;
    }

    .user-actions a {
      color: #333;
      text-decoration: none;
      font-weight: bold;
      font-size: 16px;
      transition: all 0.3s ease;
    }

    .user-actions a:hover {
      text-decoration: underline;
      color: #666;
    }

    /* NAVEGACIÓN SECUNDARIA - Menú de páginas */
    .navegacion-secundaria {
      background-color: #E6EFFD;
      padding: 12px 30px;
      margin-top: 3px;
      border-radius: 8px;
      margin-left: 30px;
      margin-right: 30px;
      font-family: 'Inter', sans-serif;
    }

    .nav-menu {
      display: flex;
      justify-content: center;
      gap: 30px;
      list-style: none;
    }

    .nav-menu li a {
      color: #333;
      text-decoration: none;
      font-size: 16px;
      padding: 8px 12px;
      border-radius: 4px;
      transition: all 0.3s ease;
      font-family: 'Inter', sans-serif;
    }

    /* Estados del menú de navegación */
    .nav-menu li a:hover {
      background-color: rgba(28, 97, 231, 0.2);
      color: #000;
    }

    .nav-menu li a.active {
      background-color: #1C61E7;
      color: white;
      font-weight: 500;
    }

    /* ========================================
       ESTILOS DEL BODY/MAIN - DASHBOARD TRABAJADOR
       (AQUÍ MODIFICAS EL CONTENIDO DE CADA PÁGINA)
    ======================================== */
    
    /* Contenedor principal del contenido */
    main {
      padding: 40px 20px;
    }

    /* ENCABEZADO DEL DASHBOARD */
    .dashboard-header {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      color: white;
      padding: 40px 30px;
      border-radius: 15px;
      margin-bottom: 30px;
      text-align: center;
      box-shadow: 0 8px 25px rgba(40, 167, 69, 0.3);
    }

    .welcome-message {
      font-size: 2.2rem;
      margin-bottom: 10px;
      font-weight: 700;
    }

    .user-info {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    /* LAYOUT DEL DASHBOARD */
    .dashboard-layout {
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 30px;
    }

    /* SIDEBAR DE NAVEGACIÓN */
    .dashboard-sidebar {
      background: white;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      height: fit-content;
      position: sticky;
      top: 20px;
    }

    .sidebar-title {
      font-size: 1.3rem;
      margin-bottom: 20px;
      color: #333;
      border-bottom: 2px solid #28a745;
      padding-bottom: 10px;
    }

    .sidebar-menu {
      list-style: none;
    }

    .sidebar-menu li {
      margin-bottom: 8px;
    }

    .sidebar-menu a {
      display: flex;
      align-items: center;
      padding: 12px 15px;
      color: #666;
      text-decoration: none;
      border-radius: 8px;
      transition: all 0.3s ease;
      font-weight: 500;
    }

    .sidebar-menu a:hover {
      background: #f8f9fa;
      color: #28a745;
    }

    .sidebar-menu a.active {
      background: #28a745;
      color: white;
    }

    .sidebar-menu .icon {
      margin-right: 12px;
      font-size: 18px;
    }

    /* ÁREA DE CONTENIDO */
    .dashboard-content {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      min-height: 600px;
    }

    .content-section {
      display: none;
    }

    .content-section.active {
      display: block;
    }

    .section-title {
      font-size: 1.8rem;
      margin-bottom: 25px;
      color: #333;
      border-bottom: 3px solid #28a745;
      padding-bottom: 10px;
    }

    /* TARJETAS DE RESUMEN */
    .summary-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .summary-card {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      color: white;
      padding: 25px;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    .summary-card .number {
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 8px;
    }

    .summary-card .label {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    /* FORMULARIOS */
    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 25px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-group label {
      margin-bottom: 8px;
      font-weight: 600;
      color: #444;
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.3s ease;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: #28a745;
    }

    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }

    /* BOTONES */
    .btn {
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 14px;
      text-decoration: none;
      display: inline-block;
      text-align: center;
    }

    .btn-primary {
      background: #28a745;
      color: white;
    }

    .btn-primary:hover {
      background: #218838;
      transform: translateY(-2px);
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .btn-secondary:hover {
      background: #545b62;
    }

    .btn-danger {
      background: #dc3545;
      color: white;
    }

    .btn-danger:hover {
      background: #c82333;
    }

    .btn-info {
      background: #17a2b8;
      color: white;
    }

    .btn-info:hover {
      background: #138496;
    }

    .btn-warning {
      background: #ffc107;
      color: #212529;
    }

    .btn-warning:hover {
      background: #e0a800;
    }

    /* TABLAS */
    .table-container {
      overflow-x: auto;
      margin-bottom: 20px;
    }

    .data-table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .data-table th {
      background: #f8f9fa;
      padding: 15px;
      text-align: left;
      font-weight: 600;
      color: #333;
      border-bottom: 2px solid #dee2e6;
    }

    .data-table td {
      padding: 15px;
      border-bottom: 1px solid #dee2e6;
    }

    .data-table tbody tr:hover {
      background: #f8f9fa;
    }

    /* ESTADOS DE ÓRDENES */
    .order-status {
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .order-status.pendiente {
      background: #fff3cd;
      color: #856404;
    }

    .order-status.en-proceso {
      background: #d1ecf1;
      color: #0c5460;
    }

    .order-status.entregado {
      background: #d4edda;
      color: #155724;
    }

    .order-status.cancelado {
      background: #f8d7da;
      color: #721c24;
    }

    /* LOADING Y MENSAJES */
    .loading {
      text-align: center;
      padding: 50px;
      font-size: 1.2rem;
      color: #666;
    }

    .mensaje {
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      text-align: center;
    }

    .mensaje.exito {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .mensaje.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .mensaje.info {
      background: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
    }

    /* MODALES */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal {
      background: white;
      border-radius: 15px;
      padding: 30px;
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      border-bottom: 2px solid #28a745;
      padding-bottom: 10px;
    }

    .modal-title {
      font-size: 1.5rem;
      color: #333;
      margin: 0;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #666;
    }

    .modal-close:hover {
      color: #dc3545;
    }

    /* CLIENTE PRESENCIAL */
    .cliente-presencial {
      background: #e9ecef;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .cliente-info {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 15px;
    }

    .buscar-productos {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }

    .buscar-productos input {
      flex: 1;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
    }

    /* CARRITO PRESENCIAL */
    .carrito-presencial {
      background: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      margin-top: 15px;
    }

    .carrito-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid #eee;
    }

    .carrito-item:last-child {
      border-bottom: none;
    }

    /* ========================================
       ESTILOS DEL FOOTER
       (NO MODIFICAR - USADO EN TODAS LAS PÁGINAS)
    ======================================== */
    
    footer {
      background-color: #000;
      color: white;
      padding: 20px;
      font-family: Arial, sans-serif;
    }

    .footer-container {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .footer-col {
      flex: 1;
      min-width: 200px;
      margin: 10px;
    }

    .footer-col h4 {
      margin-bottom: 10px;
      font-size: 18px;
    }

    .footer-col ul {
      list-style: none;
      padding: 0;
    }

    .footer-col li {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }

    .logo-footer {
      width: 120px;
      height: auto;
      border-radius: 15px;
    }

    .icono-whatsapp {
      width: 20px;
      height: 20px;
      margin-right: 8px;
    }

    .footer-copy {
      text-align: center;
      margin-top: 30px;
      font-size: 14px;
      padding-top: 10px;
    }

    /* ========================================
       ESTILOS RESPONSIVOS
       (AFECTAN A HEADER, BODY Y FOOTER)
    ======================================== */
    
    /* RESPONSIVE PARA TABLETS */
    @media (max-width: 768px) {
      /* HEADER RESPONSIVE */
      .header-superior {
        flex-direction: column;
        gap: 15px;
        padding: 15px;
        justify-content: center;
      }

      .logo {
        order: 0;
        justify-content: center;
      }

      .search-container {
        order: 1;
        max-width: 100%;
        justify-content: center;
      }

      .user-actions {
        order: 2;
        gap: 15px;
        justify-content: center;
      }

      .navegacion-secundaria {
        margin-left: 15px;
        margin-right: 15px;
        padding: 10px 15px;
      }

      .nav-menu {
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
      }

      .nav-menu li a {
        font-size: 14px;
        padding: 6px 8px;
      }

      /* BODY RESPONSIVE - DASHBOARD */
      main {
        padding: 20px 15px;
      }

      .dashboard-layout {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .dashboard-sidebar {
        position: static;
        order: 2;
      }

      .dashboard-content {
        order: 1;
        padding: 20px;
      }

      .dashboard-header {
        padding: 30px 20px;
      }

      .welcome-message {
        font-size: 1.8rem;
      }

      .form-grid {
        grid-template-columns: 1fr;
      }

      .summary-cards {
        grid-template-columns: repeat(2, 1fr);
      }

      .cliente-info {
        grid-template-columns: 1fr;
      }

      /* FOOTER RESPONSIVE */
      .footer-container {
        flex-direction: column;
        text-align: center;
      }

      .footer-col {
        margin: 15px 0;
        min-width: 100%;
      }

      .footer-col ul {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }

      .logo-footer {
        width: 100px;
      }
    }

    /* RESPONSIVE PARA MÓVILES */
    @media (max-width: 480px) {
      /* HEADER RESPONSIVE MÓVIL */
      .header-superior {
        padding: 10px;
        gap: 12px;
      }

      .logo {
        justify-content: center;
      }

      .logo img {
        width: 40px;
        height: 40px;
      }

      .search-container {
        justify-content: center;
      }

      .search-box {
        font-size: 14px;
        padding: 10px 12px 10px 40px;
      }

      .user-actions {
        justify-content: center;
        gap: 15px;
      }

      .user-actions a {
        font-size: 14px;
      }

      .navegacion-secundaria {
        margin-left: 10px;
        margin-right: 10px;
        padding: 8px 10px;
      }

      .nav-menu {
        gap: 8px;
      }

      .nav-menu li a {
        font-size: 12px;
        padding: 5px 6px;
      }

      /* BODY RESPONSIVE MÓVIL - DASHBOARD */
      .summary-cards {
        grid-template-columns: 1fr;
      }

      .dashboard-header {
        padding: 25px 15px;
      }

      .welcome-message {
        font-size: 1.5rem;
      }

      .section-title {
        font-size: 1.4rem;
      }

      .data-table {
        font-size: 14px;
      }

      .data-table th,
      .data-table td {
        padding: 10px 8px;
      }

      .modal {
        padding: 20px;
        width: 95%;
      }

      /* FOOTER RESPONSIVE MÓVIL */
      .footer-col h4 {
        font-size: 16px;
      }

      .footer-copy {
        font-size: 12px;
      }
    }
  </style>
</head>
<body>

  <!-- ========================================
       HEADER - REUTILIZABLE EN TODAS LAS PÁGINAS
       (COPIAR ESTE BLOQUE EN TODAS LAS PÁGINAS)
  ======================================== -->
  <header class="header-superior">
    <div class="logo">
      <img src="imagenes/logotechsolvers.jpg" alt="TechSolvers Logo">
    </div>
    
    <div class="search-container">
      <label for="search" class="sr-only">Buscar productos</label>
      <span class="search-icon">🔍</span>
      <input type="text" id="search" class="search-box" placeholder="Buscar productos...">
    </div>
    
    <div class="user-actions" id="user-actions">
      <a href="login.html">Login</a>
      <a href="perfil.html">Perfil</a>
      <a href="carrito.html">Carrito</a>
    </div>
  </header>

  <!-- NAVEGACIÓN SECUNDARIA - CAMBIAR 'active' SEGÚN LA PÁGINA -->
  <nav class="navegacion-secundaria">
    <ul class="nav-menu">
      <li><a href="index.html">Inicio</a></li>
      <li><a href="productos.html">Productos</a></li>
      <li><a href="categorias.html">Categorías</a></li>
      <li><a href="servicio-tecnico.html">Servicio Técnico</a></li>
      <li><a href="nosotros.html">Nosotros</a></li>
      <li><a href="faq.html">FAQ</a></li>
      <li><a href="contacto.html">Contacto</a></li>
    </ul>
  </nav>

  <!-- ========================================
       BODY/MAIN - CONTENIDO DEL DASHBOARD TRABAJADOR
       (SOLO CAMBIÉ EL CONTENIDO DENTRO DE <main>)
  ======================================== -->
  <main>
    
    <!-- ENCABEZADO DEL DASHBOARD -->
    <div class="dashboard-header">
      <h1 class="welcome-message" id="welcome-message">Panel de Trabajador</h1>
      <p class="user-info" id="user-info">Gestiona productos, órdenes y atiende clientes</p>
    </div>

    <!-- LAYOUT DEL DASHBOARD -->
    <div class="dashboard-layout">
      
      <!-- SIDEBAR DE NAVEGACIÓN -->
      <aside class="dashboard-sidebar">
        <h3 class="sidebar-title">Panel de Trabajo</h3>
        <ul class="sidebar-menu">
          <li><a href="#" class="menu-link active" data-section="resumen">
            <span class="icon">📊</span>Resumen
          </a></li>
          <li><a href="#" class="menu-link" data-section="productos">
            <span class="icon">📦</span>Productos
          </a></li>
          <li><a href="#" class="menu-link" data-section="categorias">
            <span class="icon">📁</span>Categorías
          </a></li>
          <li><a href="#" class="menu-link" data-section="ordenes">
            <span class="icon">🛒</span>Órdenes
          </a></li>
          <li><a href="#" class="menu-link" data-section="presencial">
            <span class="icon">👥</span>Atención Presencial
          </a></li>
          <li><a href="#" class="menu-link" data-section="servicios">
            <span class="icon">🔧</span>Servicios
          </a></li>
          <li><a href="#" class="menu-link" data-section="reportes">
            <span class="icon">📈</span>Reportes
          </a></li>
          <li><a href="#" onclick="cerrarSesion()" style="color: #dc3545;">
            <span class="icon">🚪</span>Cerrar Sesión
          </a></li>
        </ul>
      </aside>

      <!-- ÁREA DE CONTENIDO -->
      <section class="dashboard-content">
        
        <!-- SECCIÓN RESUMEN -->
        <div class="content-section active" id="section-resumen">
          <h2 class="section-title">Resumen del Panel</h2>
          
          <div class="summary-cards">
            <div class="summary-card">
              <div class="number" id="total-productos">0</div>
              <div class="label">Productos Gestionados</div>
            </div>
            <div class="summary-card">
              <div class="number" id="ordenes-pendientes">0</div>
              <div class="label">Órdenes Pendientes</div>
            </div>
            <div class="summary-card">
              <div class="number" id="total-categorias">0</div>
              <div class="label">Categorías Activas</div>
            </div>
            <div class="summary-card">
              <div class="number" id="ordenes-hoy">0</div>
              <div class="label">Órdenes Hoy</div>
            </div>
          </div>

          <h3 style="margin-bottom: 15px;">Órdenes Recientes para Preparar</h3>
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Título</th>
                  <th>Descripción</th>
                  <th>Productos</th>
                  <th>Estado</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="tabla-categorias">
                <tr>
                  <td colspan="6" class="loading">Cargando categorías...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- SECCIÓN ÓRDENES -->
        <div class="content-section" id="section-ordenes">
          <h2 class="section-title">Gestión de Órdenes</h2>
          
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Número</th>
                  <th>Cliente</th>
                  <th>Fecha</th>
                  <th>Items</th>
                  <th>Total</th>
                  <th>Estado</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="tabla-ordenes">
                <tr>
                  <td colspan="7" class="loading">Cargando órdenes...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- SECCIÓN ATENCIÓN PRESENCIAL -->
        <div class="content-section" id="section-presencial">
          <h2 class="section-title">Atención Presencial</h2>
          
          <div id="mensaje-presencial"></div>
          
          <div class="cliente-presencial">
            <h3 style="margin-bottom: 15px;">Datos del Cliente</h3>
            
            <div class="cliente-info">
              <div class="form-group">
                <label for="cliente-nombre">Nombre del Cliente</label>
                <input type="text" id="cliente-nombre" placeholder="Nombre completo" required>
              </div>
              <div class="form-group">
                <label for="cliente-email">Email (opcional)</label>
                <input type="email" id="cliente-email" placeholder="email@ejemplo.com">
              </div>
              <div class="form-group">
                <label for="cliente-telefono">Teléfono</label>
                <input type="tel" id="cliente-telefono" placeholder="999999999" required>
              </div>
              <div class="form-group">
                <label for="cliente-dni">DNI</label>
                <input type="text" id="cliente-dni" placeholder="12345678" required>
              </div>
            </div>

            <h4 style="margin-bottom: 15px;">Agregar Productos</h4>
            <div class="buscar-productos">
              <input type="text" id="buscar-producto" placeholder="Buscar producto por nombre..." onkeypress="buscarProductoEnter(event)">
              <button class="btn btn-info" onclick="buscarProductos()">Buscar</button>
            </div>

            <div id="resultados-productos" style="margin-bottom: 15px;">
              <!-- Resultados de búsqueda -->
            </div>

            <div class="carrito-presencial">
              <h4 style="margin-bottom: 15px;">Carrito del Cliente</h4>
              <div id="carrito-items">
                <p style="text-align: center; color: #666;">No hay productos en el carrito</p>
              </div>
              <div style="text-align: center; margin-top: 20px; padding-top: 15px; border-top: 2px solid #eee;">
                <div style="font-size: 1.2rem; font-weight: bold; margin-bottom: 15px;">
                  Total: S/ <span id="total-carrito">0.00</span>
                </div>
                <button class="btn btn-primary" onclick="procesarVentaPresencial()" id="btn-procesar-venta" disabled>
                  Procesar Venta
                </button>
                <button class="btn btn-secondary" onclick="limpiarCarritoPresencial()" style="margin-left: 10px;">
                  Limpiar Carrito
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- SECCIÓN SERVICIOS -->
        <div class="content-section" id="section-servicios">
          <h2 class="section-title">Gestión de Servicios</h2>
          
          <div id="mensaje-servicios"></div>
          
          <div style="margin-bottom: 25px;">
            <button class="btn btn-primary" onclick="mostrarModalServicio()">
              + Agregar Nuevo Servicio
            </button>
          </div>

          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Título</th>
                  <th>Tipo</th>
                  <th>Precio</th>
                  <th>Visible</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="tabla-servicios">
                <tr>
                  <td colspan="6" class="loading">Cargando servicios...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- SECCIÓN REPORTES -->
        <div class="content-section" id="section-reportes">
          <h2 class="section-title">Reportes</h2>
          
          <div class="summary-cards">
            <div class="summary-card">
              <div class="number" id="productos-creados">0</div>
              <div class="label">Productos que Creé</div>
            </div>
            <div class="summary-card">
              <div class="number" id="ventas-atendidas">0</div>
              <div class="label">Ventas que Atendí</div>
            </div>
            <div class="summary-card">
              <div class="number" id="categorias-creadas">0</div>
              <div class="label">Categorías que Creé</div>
            </div>
            <div class="summary-card">
              <div class="number" id="servicios-gestionados">0</div>
              <div class="label">Servicios Gestionados</div>
            </div>
          </div>

          <h3 style="margin-bottom: 15px;">Actividad Reciente</h3>
          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>Fecha</th>
                  <th>Acción</th>
                  <th>Descripción</th>
                  <th>Estado</th>
                </tr>
              </thead>
              <tbody id="tabla-actividad">
                <tr>
                  <td colspan="4" class="loading">Cargando actividad...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

      </section>
    </div>

  </main>

  <!-- ========================================
       FOOTER - REUTILIZABLE EN TODAS LAS PÁGINAS
       (COPIAR ESTE BLOQUE EN TODAS LAS PÁGINAS)
  ======================================== -->
  <footer>
    <div class="footer-container">
      <div class="footer-col">
        <img src="imagenes/logotechsolvers.jpg" alt="Logo TechSolvers" class="logo-footer">
      </div>
      <div class="footer-col">
        <h4>Envíos y garantías</h4>
        <ul>
          <li>¿Cómo comprar?</li>
          <li>Envíos</li>
          <li>Términos y condiciones de Garantía</li>
        </ul>
      </div>
      <div class="footer-col">
        <h4>¿Quiénes somos?</h4>
        <ul>
          <li>Nuestra tienda</li>
          <li>Privacidad</li>
        </ul>
      </div>
      <div class="footer-col">
        <h4>Contacto</h4>
        <ul>
          <li><img src="imagenes/logoWhassap.png" alt="WhatsApp" class="icono-whatsapp">Asesor de ventas</li>
          <li><img src="imagenes/logoWhassap.png" alt="WhatsApp" class="icono-whatsapp">Área de garantía</li>
        </ul>
      </div>
    </div>
    <div class="footer-copy">
      &copy; TechSolvers 2025
    </div>
  </footer>

  <!-- MODALES -->
  
  <!-- MODAL PRODUCTO -->
  <div class="modal-overlay" id="modal-producto">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title" id="modal-producto-titulo">Agregar Producto</h3>
        <button class="modal-close" onclick="cerrarModal('modal-producto')">&times;</button>
      </div>
      
      <div id="mensaje-modal-producto"></div>
      
      <form id="form-producto">
        <input type="hidden" id="producto-id">
        
        <div class="form-grid">
          <div class="form-group">
            <label for="producto-nombre">Nombre del Producto</label>
            <input type="text" id="producto-nombre" name="nombre" required>
          </div>
          <div class="form-group">
            <label for="producto-marca">Marca</label>
            <input type="text" id="producto-marca" name="marca" required>
          </div>
          <div class="form-group">
            <label for="producto-modelo">Modelo</label>
            <input type="text" id="producto-modelo" name="modelo">
          </div>
          <div class="form-group">
            <label for="producto-categoria">Categoría</label>
            <select id="producto-categoria" name="categoriaId" required>
              <option value="">Seleccionar categoría</option>
            </select>
          </div>
          <div class="form-group">
            <label for="producto-precio">Precio (S/)</label>
            <input type="number" id="producto-precio" name="precio" step="0.01" min="0" required>
          </div>
          <div class="form-group">
            <label for="producto-stock">Stock</label>
            <input type="number" id="producto-stock" name="stock" min="0" required>
          </div>
          <div class="form-group full-width">
            <label for="producto-descripcion">Descripción</label>
            <textarea id="producto-descripcion" name="descripcion" rows="3"></textarea>
          </div>
          <div class="form-group full-width">
            <label for="producto-imagen">URL de Imagen</label>
            <input type="url" id="producto-imagen" name="imagenUrl" placeholder="https://ejemplo.com/imagen.jpg">
          </div>
        </div>
        
        <div style="margin-top: 20px; text-align: center;">
          <button type="submit" class="btn btn-primary">Guardar Producto</button>
          <button type="button" class="btn btn-secondary" onclick="cerrarModal('modal-producto')" style="margin-left: 10px;">Cancelar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- MODAL CATEGORÍA -->
  <div class="modal-overlay" id="modal-categoria">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title" id="modal-categoria-titulo">Agregar Categoría</h3>
        <button class="modal-close" onclick="cerrarModal('modal-categoria')">&times;</button>
      </div>
      
      <div id="mensaje-modal-categoria"></div>
      
      <form id="form-categoria">
        <input type="hidden" id="categoria-id">
        
        <div class="form-group">
          <label for="categoria-titulo">Título de la Categoría</label>
          <input type="text" id="categoria-titulo" name="titulo" required>
        </div>
        <div class="form-group">
          <label for="categoria-descripcion">Descripción</label>
          <textarea id="categoria-descripcion" name="descripcion" rows="3"></textarea>
        </div>
        <div class="form-group">
          <label for="categoria-imagen">URL de Imagen</label>
          <input type="url" id="categoria-imagen" name="imagenUrl" placeholder="https://ejemplo.com/imagen.jpg">
        </div>
        
        <div style="margin-top: 20px; text-align: center;">
          <button type="submit" class="btn btn-primary">Guardar Categoría</button>
          <button type="button" class="btn btn-secondary" onclick="cerrarModal('modal-categoria')" style="margin-left: 10px;">Cancelar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- MODAL SERVICIO -->
  <div class="modal-overlay" id="modal-servicio">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title" id="modal-servicio-titulo">Agregar Servicio</h3>
        <button class="modal-close" onclick="cerrarModal('modal-servicio')">&times;</button>
      </div>
      
      <div id="mensaje-modal-servicio"></div>
      
      <form id="form-servicio">
        <input type="hidden" id="servicio-id">
        
        <div class="form-grid">
          <div class="form-group">
            <label for="servicio-titulo">Título del Servicio</label>
            <input type="text" id="servicio-titulo" name="titulo" required>
          </div>
          <div class="form-group">
            <label for="servicio-tipo">Tipo de Servicio</label>
            <select id="servicio-tipo" name="tipoServicio" required>
              <option value="">Seleccionar tipo</option>
              <option value="pc">Reparación PC</option>
              <option value="celular">Reparación Celular</option>
              <option value="impresora">Reparación Impresora</option>
              <option value="otro">Otro</option>
            </select>
          </div>
          <div class="form-group">
            <label for="servicio-precio">Precio Base (S/)</label>
            <input type="number" id="servicio-precio" name="precio" step="0.01" min="0">
          </div>
          <div class="form-group">
            <label for="servicio-visible">Mostrar en Inicio</label>
            <select id="servicio-visible" name="mostrarEnInicio">
              <option value="true">Sí</option>
              <option value="false">No</option>
            </select>
          </div>
          <div class="form-group full-width">
            <label for="servicio-descripcion">Descripción</label>
            <textarea id="servicio-descripcion" name="descripcion" rows="4" required></textarea>
          </div>
        </div>
        
        <div style="margin-top: 20px; text-align: center;">
          <button type="submit" class="btn btn-primary">Guardar Servicio</button>
          <button type="button" class="btn btn-secondary" onclick="cerrarModal('modal-servicio')" style="margin-left: 10px;">Cancelar</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Variables globales
    const API_BASE_URL = 'http://localhost:8080/api';
    let usuarioActual = null;
    let carritoPresencial = [];
    let categorias = [];

    // Inicializar dashboard
    document.addEventListener('DOMContentLoaded', function() {
      verificarAutenticacion();
      configurarEventos();
      cargarDashboard();
    });

    // Verificar si el usuario está autenticado
    function verificarAutenticacion() {
      const usuario = JSON.parse(localStorage.getItem('usuario') || '{}');
      
      if (!usuario.id || usuario.rol !== 'trabajador') {
        alert('Debes iniciar sesión como trabajador para acceder a esta página');
        window.location.href = 'login.html';
        return;
      }

      usuarioActual = usuario;
      actualizarInterfazUsuario();
    }

    // Actualizar interfaz para usuario logueado
    function actualizarInterfazUsuario() {
      if (usuarioActual) {
        // Actualizar header
        document.getElementById('user-actions').innerHTML = `
          <a href="dashboard-trabajador.html">Panel (${usuarioActual.nombre})</a>
          <a href="productos.html">Catálogo</a>
          <a href="#" onclick="cerrarSesion()">Cerrar Sesión</a>
        `;

        // Actualizar mensaje de bienvenida
        document.getElementById('welcome-message').textContent = 
          `Bienvenido, ${usuarioActual.nombre}`;
        document.getElementById('user-info').textContent = 
          `Trabajador TechSolvers - Panel de Gestión`;
      }
    }

    // Configurar eventos
    function configurarEventos() {
      // Navegación del sidebar
      document.querySelectorAll('.menu-link').forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const section = this.dataset.section;
          if (section) {
            cambiarSeccion(section);
          }
        });
      });

      // Formularios
      document.getElementById('form-producto').addEventListener('submit', guardarProducto);
      document.getElementById('form-categoria').addEventListener('submit', guardarCategoria);
      document.getElementById('form-servicio').addEventListener('submit', guardarServicio);

      // Búsqueda
      document.getElementById('search').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          const query = this.value.trim();
          if (query) {
            window.location.href = `productos.html?buscar=${encodeURIComponent(query)}`;
          }
        }
      });
    }

    // Cambiar sección activa
    function cambiarSeccion(seccionId) {
      // Actualizar navegación
      document.querySelectorAll('.menu-link').forEach(link => {
        link.classList.remove('active');
      });
      document.querySelector(`[data-section="${seccionId}"]`).classList.add('active');

      // Mostrar sección
      document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active');
      });
      document.getElementById(`section-${seccionId}`).classList.add('active');

      // Cargar datos específicos de la sección
      switch(seccionId) {
        case 'resumen':
          cargarResumen();
          break;
        case 'productos':
          cargarProductos();
          break;
        case 'categorias':
          cargarCategorias();
          break;
        case 'ordenes':
          cargarOrdenes();
          break;
        case 'presencial':
          // La sección presencial no necesita carga inicial
          break;
        case 'servicios':
          cargarServicios();
          break;
        case 'reportes':
          cargarReportes();
          break;
      }
    }

    // Resto de funciones JavaScript aquí...
    // (Por brevedad, incluiré solo las funciones principales)

    // Cargar dashboard inicial
    async function cargarDashboard() {
      await cargarCategorias();
      await cargarResumen();
    }

    // Cerrar sesión
    function cerrarSesion() {
      if (confirm('¿Estás seguro de que quieres cerrar sesión?')) {
        localStorage.removeItem('usuario');
        alert('Sesión cerrada exitosamente');
        window.location.href = 'index.html';
      }
    }

    // Funciones de modales
    function mostrarModalProducto(productoId = null) {
      document.getElementById('modal-producto').style.display = 'flex';
    }

    function mostrarModalCategoria(categoriaId = null) {
      document.getElementById('modal-categoria').style.display = 'flex';
    }

    function mostrarModalServicio(servicioId = null) {
      document.getElementById('modal-servicio').style.display = 'flex';
    }

    function cerrarModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
    }

    // Cerrar modales al hacer click fuera
    document.addEventListener('click', function(e) {
      if (e.target.classList.contains('modal-overlay')) {
        e.target.style.display = 'none';
      }
    });

    // Funciones CRUD básicas (puedes expandir según necesites)
    async function guardarProducto(e) {
      e.preventDefault();
      alert('Función guardar producto - conectar al backend');
    }

    async function guardarCategoria(e) {
      e.preventDefault();
      alert('Función guardar categoría - conectar al backend');
    }

    async function guardarServicio(e) {
      e.preventDefault();
      alert('Función guardar servicio - conectar al backend');
    }

    async function cargarResumen() {
      // Implementar carga de estadísticas
      console.log('Cargando resumen...');
    }

    async function cargarProductos() {
      // Implementar carga de productos
      console.log('Cargando productos...');
    }

    async function cargarCategorias() {
      // Implementar carga de categorías
      console.log('Cargando categorías...');
    }

    async function cargarOrdenes() {
      // Implementar carga de órdenes
      console.log('Cargando órdenes...');
    }

    async function cargarServicios() {
      // Implementar carga de servicios
      console.log('Cargando servicios...');
    }

    async function cargarReportes() {
      // Implementar carga de reportes
      console.log('Cargando reportes...');
    }
  </script>

</body>
</html>
                  <th>Número</th>
                  <th>Cliente</th>
                  <th>Fecha</th>
                  <th>Total</th>
                  <th>Estado</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="ordenes-recientes">
                <tr>
                  <td colspan="6" class="loading">Cargando órdenes...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- SECCIÓN PRODUCTOS -->
        <div class="content-section" id="section-productos">
          <h2 class="section-title">Gestión de Productos</h2>
          
          <div id="mensaje-productos"></div>
          
          <div style="margin-bottom: 25px;">
            <button class="btn btn-primary" onclick="mostrarModalProducto()">
              + Agregar Nuevo Producto
            </button>
          </div>

          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nombre</th>
                  <th>Categoría</th>
                  <th>Precio</th>
                  <th>Stock</th>
                  <th>Estado</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="tabla-productos">
                <tr>
                  <td colspan="7" class="loading">Cargando productos...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- SECCIÓN CATEGORÍAS -->
        <div class="content-section" id="section-categorias">
          <h2 class="section-title">Gestión de Categorías</h2>
          
          <div id="mensaje-categorias"></div>
          
          <div style="margin-bottom: 25px;">
            <button class="btn btn-primary" onclick="mostrarModalCategoria()">
              + Agregar Nueva Categoría
            </button>
          </div>

          <div class="table-container">
            <table class="data-table">
              <thead>
                <tr>

